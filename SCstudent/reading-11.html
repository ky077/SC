<!doctype html>
<html lang="zh-Hans-TW">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="全方位中文 Smart Chinese">
<meta name="author" content="全方位中文 Smart Chinese">
<title>全方位中文 Smart Chinese</title>
<link rel="shortcut icon" type="image/x-icon" href="./Content/images/favicon.ico">
<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;600;700&family=Noto+Serif+TC:wght@500;600;700&display=swap" rel="stylesheet">

<!-- Customized Bootstrap Stylesheet -->
<link rel="stylesheet" type="text/css" href="Content/css/bootstrap.css">

<!-- This web Core Stylesheet -->
<link rel="stylesheet" type="text/css" href="Content/css/styles.css">
</head>

<body>
<div class="page">
  <div class="bg"> </div>
  <div class="header"> </div>
  <div class="content"> 
    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-11 d-flex flex-column"> 
          <!-- 指導語 開始 -->
          <h2 class="test-instruction">Drag the correct pictures into the corresponding sentence.</h2>
          <!-- 指導語 結束 --> 
          <!-- 進度 開始 -->
          <div class="test-progress">
            <div class="progress-bar" style="width: 90%;"></div>
            <div class="progress-text">
              <label>18</label>
              /
              <label>20</label>
            </div>
          </div>
          <!-- 進度 結束 --> 
          <!-- 題目內容 開始 -->
          <div class="test-content">
            <div class="q-wrapper">
              <div class="q-num">18</div>
              <div class="q-content">
                <div class="q-topic">
                  <div class="row row-cols-3 row-cols-md-5 g-3 justify-content-center drag-section">
                    <div class="col">
                      <div class="ratio ratio-1x1 img-size-square drag-draggable drag-img mx-auto"><span>(A)</span><img src="Content/temp/reading-11-A.jpg" alt=""/></div>
                    </div>
                    <div class="col">
                      <div class="ratio ratio-1x1 img-size-square drag-draggable drag-img mx-auto"><span>(B)</span><img src="Content/temp/reading-11-B.jpg" alt=""/></div>
                    </div>
                    <div class="col">
                      <div class="ratio ratio-1x1 img-size-square drag-draggable drag-img mx-auto"><span>(C)</span><img src="Content/temp/reading-11-C.jpg" alt=""/></div>
                    </div>
                    <div class="col">
                      <div class="ratio ratio-1x1 img-size-square drag-draggable drag-img mx-auto"><span>(D)</span><img src="Content/temp/reading-11-D.jpg" alt=""/></div>
                    </div>
                    <div class="col">
                      <div class="ratio ratio-1x1 img-size-square drag-draggable drag-img mx-auto"><span>(E)</span><img src="Content/temp/reading-11-E.jpg" alt=""/></div>
                    </div>
                  </div>
                </div>
                <div class="q-option">
                  <div id="option-carousel" class="option-carousel carousel slide" data-bs-wrap="false" data-bs-touch="false" data-bs-interval="false">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <div class="row align-items-center">
                          <div class="col-12 col-lg-8">
                            <div class="q-wrapper">
                              <div class="q-num">(1)</div>
                              <div class="q-content">
                                <div class="q-topic">
                                  <div>
                                    <ruby>
                                      <rt>tā</rt>
                                      <rb>他</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>zài</rt>
                                      <rb>在</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>shuì</rt>
                                      <rb>睡</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>jià </rt>
                                      <rb>覺</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>oní</rt>
                                      <rb>呢</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>。</rb>
                                    </ruby>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-lg-4">
                            <div class="drop-section drop-img mx-auto" data-placeholder="Drop here..." data-dropped="false"></div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="row align-items-center">
                          <div class="col-12 col-lg-8">
                            <div class="q-wrapper">
                              <div class="q-num">(2)</div>
                              <div class="q-content">
                                <div class="q-topic">
                                  <div>
                                    <ruby>
                                      <rt>tā</rt>
                                      <rb>他</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>míng</rt>
                                      <rb>明</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>tiān</rt>
                                      <rb>天</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>zuò</rt>
                                      <rb>坐</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>huǒ</rt>
                                      <rb>火</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>chē</rt>
                                      <rb>車</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>qù</rt>
                                      <rb>去</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>。</rb>
                                    </ruby>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-lg-4">
                            <div class="drop-section drop-img mx-auto" data-placeholder="Drop here..." data-dropped="false"></div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="row align-items-center">
                          <div class="col-12 col-lg-8">
                            <div class="q-wrapper">
                              <div class="q-num">(3)</div>
                              <div class="q-content">
                                <div class="q-topic">
                                  <div>
                                    <ruby>
                                      <rt>tā</rt>
                                      <rb>他</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>zài</rt>
                                      <rb>在</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>yī</rt>
                                      <rb>醫</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>yuàn</rt>
                                      <rb>院</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>gōng</rt>
                                      <rb>工</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>zuò</rt>
                                      <rb>作</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>，</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>shì</rt>
                                      <rb>是</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>gè</rt>
                                      <rb>個</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>yī</rt>
                                      <rb>醫</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>shēng</rt>
                                      <rb>生</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>。</rb>
                                    </ruby>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-lg-4">
                            <div class="drop-section drop-img mx-auto" data-placeholder="Drop here..." data-dropped="false"></div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="row align-items-center">
                          <div class="col-12 col-lg-8">
                            <div class="q-wrapper">
                              <div class="q-num">(4)</div>
                              <div class="q-content">
                                <div class="q-topic">
                                  <div>
                                    <ruby>
                                      <rt>wǒ</rt>
                                      <rb>我</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>xiǎng</rt>
                                      <rb>想</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>hē</rt>
                                      <rb>喝</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>yī</rt>
                                      <rb>一</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>bēi</rt>
                                      <rb>杯</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>chá</rt>
                                      <rb>茶</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>。</rb>
                                    </ruby>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-lg-4">
                            <div class="drop-section drop-img mx-auto" data-placeholder="Drop here..." data-dropped="false"></div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="row align-items-center">
                          <div class="col-12 col-lg-8">
                            <div class="q-wrapper">
                              <div class="q-num">(5)</div>
                              <div class="q-content">
                                <div class="q-topic">
                                  <div>
                                    <ruby>
                                      <rt>tā</rt>
                                      <rb>他</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>men</rt>
                                      <rb>們</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>shì</rt>
                                      <rb>是</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>tóng</rt>
                                      <rb>同</rb>
                                    </ruby>
                                    <ruby>
                                      <rt>xué</rt>
                                      <rb>學</rb>
                                    </ruby>
                                    <ruby>
                                      <rt></rt>
                                      <rb>。</rb>
                                    </ruby>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="col-12 col-lg-4">
                            <div class="drop-section drop-img mx-auto" data-placeholder="Drop here..."  data-dropped="false"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#option-carousel" data-bs-slide="prev"> <span class="carousel-control-prev-icon"></span> </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#option-carousel" data-bs-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden"></span> </button>
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="4" aria-label="Slide 5"></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- 題目內容 結束 --> 
          <!-- 按鈕 開始 -->
          <div class="test-btn"> <a role="button" class="btn btn-secondary btn-lg fw-bold" href="reading-12.html">NEXT</a> </div>
          <!-- 按鈕 結束 --> 
        </div>
      </div>
    </div>
    <!-- ------- ------- ------- ------- ------- ------- ------- --> 
  </div>
</div>
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- JavaScript Libraries --> 
<script src="Content/js/jquery-3.6.0.min.js"></script> 
<script src="Content/js/bootstrap.bundle.min.js"></script> 

<!-- widgets JavaScript --> 
<script src="Content/widgets/jquery-ui/jquery-ui.js"></script> 
<script src="Content/widgets/jquery-ui/jquery.ui.touch-punch.min.js"></script> 

<!-- This web Javascript --> 
<script src="Content/js/main.js"></script> 
<script src="Content/js/viewTopic.js"></script> 
<script> 
// .drag-draggable 題目 可被拖曳
$('.drag-draggable').draggable({
    revert: function(dropped) { 
        if (dropped) { //拖曳成功
            $(this).draggable( 'option', 'disabled', true );
            return false; 
        } else {//拖曳失敗
            $(this).draggable( 'option', 'disabled', false );
            return true;
        }
    },
    helper: function() {
        // 創建helper符合當前大小
        return $(this).clone().css({
            'width':   $(this).width(),
            'height':  $(this).height(),
        });
    },
    start: function(event, ui) {
        $(this).addClass('gray');
    },
    stop: function(event, ui) {
        $(this).removeClass('gray');
    },
    zIndex: 9999
});
  
// .drop-section 答案 托放區 
$('.drop-section').droppable({
    accept: function(draggable) {
        return $(this).children().length === 0;//只允許拖曳一個答案入內
    },
    drop: function(event, ui) { 
        var clonedElement = $(ui.helper).clone().css({ 
            top: '10px', 
            left: '10px',
            display: 'inline-block',
        });
        
        $(this).addClass('dropped').append(clonedElement);
        
        $(this).data('dropped', true)
               .attr('data-dropped', true);; // 將 data-dropped 設置為 true
        
        // 檢查是否所有的 drop-section 都已經有放置答案
        var allDropped = $(".drop-section").filter(function() {
            return $(this).data('dropped') !== true;
        }).length === 0;

		let tooltipElement = $('.test-btn').find('[data-bs-toggle="tooltip"]');
		if (tooltipElement.length) { 
			if (allDropped) {
				$('.test-btn .btn').removeClass('disabled');  
				
				let tooltipInstance = bootstrap.Tooltip.getInstance(tooltipElement[0]);
      			tooltipInstance.dispose(); // 銷毀 Tooltip
			} else {
				$('.test-btn .btn').addClass('disabled');
				
				let tooltipInstance = bootstrap.Tooltip.getInstance(tooltipElement[0]);
				tooltipInstance.enable();
			}
		}
        
        
        //使複製的元素一拖曳就回原位置
        clonedElement.draggable({
            revert: function(event, ui, dropped) { 
                $(this).parents('.drop-section').removeClass('dropped')
                                                .data('dropped', false)
                                                .attr('data-dropped', false); 
                $(this).remove();
                return false;
            },
            start: function(event, ui) {
                //解決 carousel overflow:hidden; 遮擋住拖曳物件
                $('.option-carousel .carousel-inner').css({
                    overflow: 'visible',      
                });
            },
            stop: function(event, ui) {
                //還原 carousel overflow:hidden; 
                $('.option-carousel .carousel-inner').css({
                    overflow: '',      
                });
                
                //找到.drag-section內符合複製元素的DOM，使其恢復為可拖曳
                var clonedHtml = clonedElement.html();  
                $(".drag-section .drag-draggable").each(function() {
                    if ($(this).html() === clonedHtml) {
                        $(this).draggable("option", "disabled", false);
                    }
                });  
                
                $('.test-btn .btn').addClass('disabled');
				
				let tooltipElement = $('.test-btn').find('[data-bs-toggle="tooltip"]');
				if (tooltipElement.length) { 
					let tooltipInstance = bootstrap.Tooltip.getInstance(tooltipElement[0]);
					tooltipInstance.enable();
				}
            },
        });
    }
});

$(document).ready(function() {
    $(window).trigger('resize');
});
$(window).on('load',function() {
    $(window).trigger('resize');
});    
$(window).on('resize',function() {	
    $('.drop-section.drop-img').css({
        'width': $('.drag-draggable').width() + 20,
        'height':$('.drag-draggable').height() + 20
    });
    $('.drop-section.drop-img .ui-draggable-dragging').css({
        'width': $('.drag-draggable').width(),
        'height':$('.drag-draggable').height()
    });
});      
</script>
</body>
</html>
