<!doctype html>
<html lang="zh-Hans-CN">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="全方位中文 Smart Chinese">
<meta name="author" content="全方位中文 Smart Chinese">
<title>全方位中文 Smart Chinese</title>
<link rel="shortcut icon" type="image/x-icon" href="./Content/images/favicon.ico">
<!-- Google Web Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@500;600;700&family=Noto+Serif+TC:wght@500;600;700&display=swap" rel="stylesheet">

<!-- Customized Bootstrap Stylesheet -->
<link rel="stylesheet" type="text/css" href="Content/css/bootstrap.css">

<!-- This web Core Stylesheet -->
<link rel="stylesheet" type="text/css" href="Content/css/styles.css">
</head>

<body>
<div class="page">
  <div class="bg"> </div>
  <div class="header">
  </div>
  <div class="content"> 
    <!-- ------- ------- ------- ------- ------- ------- ------- -->
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-11 d-flex flex-column"> 
          <!-- 指導語 開始 -->
          <h2 class="test-instruction">Based on the contexts, drag the appropriate choices to match the given sentences.
</h2>
          <!-- 指導語 結束 --> 
          <!-- 進度 開始 -->
          <div class="test-progress">
            <div class="progress-bar" style="width: 95%;"></div>
            <div class="progress-text"><label>19</label>/<label>20</label> </div>
          </div>
          <!-- 進度 結束 --> 
          <!-- 題目內容 開始 -->
          <div class="test-content">
            <div class="q-wrapper">
              <div class="q-num">19</div>
              <div class="q-content">
                <div class="q-topic">
                  <div class="row g-3 drag-section">
                    <div class="col-auto">
                      <div class="drag-draggable drag-text"><span>(A)</span>
                        <ruby>
                          <rt></rt>
                          <rb>7</rb>
                        </ruby>
                        <ruby>
                          <rt>diǎn</rt>
                          <rb>点</rb>
                        </ruby>
                        <ruby>
                          <rt>le</rt>
                          <rb>了</rb>
                        </ruby>
                      </div>
                    </div>
                    <div class="col-auto">
                      <div class="drag-draggable drag-text"><span>(B)</span>
                        <ruby>
                          <rt>píng</rt>
                          <rb>苹</rb>
                        </ruby>
                        <ruby>
                          <rt>guǒ</rt>
                          <rb>果</rb>
                        </ruby>
                      </div>
                    </div>
                    <div class="col-auto">
                      <div class="drag-draggable drag-text"><span>(C)</span>
                        <ruby>
                          <rt></rt>
                          <rb>20</rb>
                        </ruby>
                        <ruby>
                          <rt>kuài</rt>
                          <rb>块</rb>
                        </ruby>
                      </div>
                    </div>
                    <div class="col-auto">
                      <div class="drag-draggable drag-text"><span>(D)</span>
                        <ruby>
                          <rt>zuò</rt>
                          <rb>坐</rb>
                        </ruby>
                        <ruby>
                          <rt>chū</rt>
                          <rb>出</rb>
                        </ruby>
                        <ruby>
                          <rt>zū</rt>
                          <rb>租</rb>
                        </ruby>
                        <ruby>
                          <rt>chē</rt>
                          <rb>车</rb>
                        </ruby>
                      </div>
                    </div>
                    <div class="col-auto">
                      <div class="drag-draggable drag-text"><span>(E)</span>
                        <ruby>
                          <rt>hǎo</rt>
                          <rb>好</rb>
                        </ruby>
                        <ruby>
                          <rt>de</rt>
                          <rb>的</rb>
                        </ruby>
                        <ruby>
                          <rt></rt>
                          <rb>，</rb>
                        </ruby>
                        <ruby>
                          <rt>xiè</rt>
                          <rb>谢</rb>
                        </ruby>
                        <ruby>
                          <rt>xie</rt>
                          <rb>谢</rb>
                        </ruby> 
                        <ruby>
                          <rt></rt>
                          <rb>！</rb>
                        </ruby>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="q-option">
                  <div id="option-carousel" class="option-carousel carousel slide" data-bs-wrap="false" data-bs-touch="false" data-bs-interval="false">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <div class="q-wrapper">
                          <div class="q-num">(1)</div>
                          <div class="q-content">
                            <div class="q-topic">
                              <div>
                                <ruby>
                                  <rt>nǐ</rt>
                                  <rb>你</rb>
                                </ruby>
                                <ruby>
                                  <rt>zěn</rt>
                                  <rb>怎</rb>
                                </ruby>
                                <ruby>
                                  <rt>me</rt>
                                  <rb>么</rb>
                                </ruby>
                                <ruby>
                                  <rt>qù</rt>
                                  <rb>去</rb>
                                </ruby>
                                <ruby>
                                  <rt>nǎ</rt>
                                  <rb>那</rb>
                                </ruby>
                                <ruby>
                                  <rt>ge</rt>
                                  <rb>个</rb>
                                </ruby>
                                <ruby>
                                  <rt>fàn</rt>
                                  <rb>饭</rb>
                                </ruby>
                                <ruby>
                                  <rt>diàn</rt>
                                  <rb>店</rb>
                                </ruby>
                                <ruby>
                                  <rt></rt>
                                  <rb>？</rb>
                                </ruby>
                              </div>
                            </div>
                            <div class="q-option">
                              <div class="drop-section drop-text" data-placeholder="Drop here..." data-dropped="false">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="q-wrapper">
                          <div class="q-num">(2)</div>
                          <div class="q-content">
                            <div class="q-topic">
                              <div>
                                <ruby>
                                  <rt>xiàn</rt>
                                  <rb>现</rb>
                                </ruby>
                                <ruby>
                                  <rt>zài</rt>
                                  <rb>在</rb>
                                </ruby>
                                <ruby>
                                  <rt>jǐ</rt>
                                  <rb>几</rb>
                                </ruby>
                                <ruby>
                                  <rt>diǎn</rt>
                                  <rb>点</rb>
                                </ruby>
                                <ruby>
                                  <rt>le</rt>
                                  <rb>了</rb>
                                </ruby>
                                <ruby>
                                  <rt></rt>
                                  <rb>？</rb>
                                </ruby>
                              </div>
                            </div>
                            <div class="q-option">
                              <div class="drop-section drop-text" data-placeholder="Drop here..." data-dropped="false">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="q-wrapper">
                          <div class="q-num">(3)</div>
                          <div class="q-content">
                            <div class="q-topic">
                              <div>
                                <ruby>
                                  <rt>nǐ</rt>
                                  <rb>你</rb>
                                </ruby>
                                <ruby>
                                  <rt>ài</rt>
                                  <rb>爱</rb>
                                </ruby>
                                <ruby>
                                  <rt>chī</rt>
                                  <rb>吃</rb>
                                </ruby>
                                <ruby>
                                  <rt>shén</rt>
                                  <rb>什</rb>
                                </ruby>
                                <ruby>
                                  <rt>me</rt>
                                  <rb>么</rb>
                                </ruby>
                                <ruby>
                                  <rt>shuǐ</rt>
                                  <rb>水</rb>
                                </ruby>
                                <ruby>
                                  <rt>guǒ</rt>
                                  <rb>果</rb>
                                </ruby>
                                <ruby>
                                  <rt></rt>
                                  <rb>？</rb>
                                </ruby>
                              </div>
                            </div>
                            <div class="q-option">
                              <div class="drop-section drop-text" data-placeholder="Drop here..." data-dropped="false">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="q-wrapper">
                          <div class="q-num">(4)</div>
                          <div class="q-content">
                            <div class="q-topic">
                              <div>
                                <ruby>
                                  <rt>zhè </rt>
                                  <rb>这</rb>
                                </ruby>
                                <ruby>
                                  <rt>ge</rt>
                                  <rb>个</rb>
                                </ruby>
                                <ruby>
                                  <rt>xiǎo</rt>
                                  <rb>小</rb>
                                </ruby>
                                <ruby>
                                  <rt>bēi</rt>
                                  <rb>杯</rb>
                                </ruby>
                                <ruby>
                                  <rt>zi</rt>
                                  <rb>子</rb>
                                </ruby>
                                <ruby>
                                  <rt>duō</rt>
                                  <rb>多</rb>
                                </ruby>
                                <ruby>
                                  <rt>shǎo</rt>
                                  <rb>少</rb>
                                </ruby>
                                <ruby>
                                  <rt>qián</rt>
                                  <rb>钱</rb>
                                </ruby>
                                <ruby>
                                  <rt></rt>
                                  <rb>？</rb>
                                </ruby>
                              </div>
                            </div>
                            <div class="q-option">
                              <div class="drop-section drop-text" data-placeholder="Drop here..." data-dropped="false">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="carousel-item">
                        <div class="q-wrapper">
                          <div class="q-num">(5)</div>
                          <div class="q-content">
                            <div class="q-topic">
                              <div>
                                <ruby>
                                  <rt>nǐ</rt>
                                  <rb>你</rb>
                                </ruby>
                                <ruby>
                                  <rt>shì</rt>
                                  <rb>是</rb>
                                </ruby>
                                <ruby>
                                  <rt>nǎ</rt>
                                  <rb>哪</rb>
                                </ruby>
                                <ruby>
                                  <rt>guó</rt>
                                  <rb>国</rb>
                                </ruby>
                                <ruby>
                                  <rt>rén</rt>
                                  <rb>人</rb>
                                </ruby>
                                <ruby>
                                  <rt></rt>
                                  <rb>？</rb>
                                </ruby>
                              </div>
                            </div>
                            <div class="q-option">
                              <div class="drop-section drop-text" data-placeholder="Drop here..." data-dropped="false">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#option-carousel" data-bs-slide="prev"> <span class="carousel-control-prev-icon"></span> </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#option-carousel" data-bs-slide="next"> <span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden"></span> </button>
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="3" aria-label="Slide 4"></button>
                      <button type="button" data-bs-target="#option-carousel" data-bs-slide-to="4" aria-label="Slide 5"></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 題目內容 結束 --> 
          <!-- 按鈕 開始 -->
          <div class="test-btn"> <a role="button" class="btn btn-secondary btn-lg fw-bold" href="reading-13.html">NEXT</a> </div>
          <!-- 按鈕 結束 --> 
        </div>
      </div>
    </div>
    <!-- ------- ------- ------- ------- ------- ------- ------- --> 
  </div>
</div>
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- ------- ------- ------- ------- ------- ------- ------- --> 
<!-- JavaScript Libraries --> 
<script src="Content/js/jquery-3.6.0.min.js"></script> 
<script src="Content/js/bootstrap.bundle.min.js"></script> 

<!-- widgets JavaScript --> 
<script src="Content/widgets/jquery-ui/jquery-ui.js"></script> 
<script src="Content/widgets/jquery-ui/jquery.ui.touch-punch.min.js"></script> 

<!-- This web Javascript --> 
<script src="Content/js/main.js"></script> 
<script src="Content/js/viewTopic.js"></script>		
<script>
//.drag-draggable 可被拖曳
$(".drag-draggable").draggable({
    revert: function(dropped) { 
        if (dropped) { //拖曳成功
            $(this).draggable( "option", "disabled", true );
            return false; 
        } else {//拖曳失敗
            $(this).draggable( "option", "disabled", false );
            return true;
        }
    },
    helper: "clone",
    start: function(event, ui) {
        $(this).addClass('gray');
    },
    stop: function(event, ui) {
        $(this).removeClass('gray');
    },
    zIndex: 9999
});

$(".drop-section").droppable({
    accept: function(draggable) {
        return $(this).children().length === 0;//只允許拖曳一個答案入內
    },
    drop: function(event, ui) {
        var clonedElement = $(ui.helper).clone().css({ 
            top: '.5rem', 
            left: '.5rem',
            display: 'inline-block'
        });

        $(this).addClass('dropped').append(clonedElement); 
        
        
        $(this).data('dropped', true)
               .attr('data-dropped', true); // 將 data-dropped 設置為 true
        
        // 檢查是否所有的 drop-section 都已經有放置答案
        var allDropped = $(".drop-section").filter(function() {
            return $(this).data('dropped') !== true;
        }).length === 0;

        if (allDropped) {
            $('.test-btn .btn').removeClass('disabled');  
            new bootstrap.Tooltip($('.test-btn').find('[data-bs-toggle="tooltip"]')).disable();
        } else {
            $('.test-btn .btn').addClass('disabled');
            new bootstrap.Tooltip($('.test-btn').find('[data-bs-toggle="tooltip"]')).enable();
        }

        //使複製的元素一拖曳就回原位置
        clonedElement.draggable({
            revert: function(event, ui, dropped) { 
                $(this).parents('.drop-section').removeClass('dropped')
                                                .data('dropped', false)
                                                .attr('data-dropped', false); 
                $(this).remove();
                return false;
            },
            start: function(event, ui) {
                //解決 carousel overflow:hidden; 遮擋住拖曳物件
                $('.option-carousel .carousel-inner').css({
                    overflow: 'visible',      
                });
            },
            stop: function(event, ui) {
                //還原 carousel overflow:hidden; 
                $('.option-carousel .carousel-inner').css({
                    overflow: '',      
                });
                
                //找到.drag-section內符合複製元素的DOM，使其恢復為可拖曳
                var clonedHtml = clonedElement.html();  
                $(".drag-section .drag-draggable").each(function() {
                    if ($(this).html() === clonedHtml) {
                        $(this).draggable("option", "disabled", false);
                        
                    }
                });  
                
                $('.test-btn .btn').addClass('disabled');
                new bootstrap.Tooltip($('.test-btn').find('[data-bs-toggle="tooltip"]')).enable();
            },
        });
    }
});
</script>
</body>
</html>
